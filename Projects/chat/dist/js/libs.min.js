"use strict";window.onload=function(){var o=document.querySelector(".chat__messages"),e=document.querySelector(".send"),t=document.querySelector(".send__input"),n=document.querySelectorAll(".contact"),a=document.querySelector(".btn-menu"),s=document.querySelector(".search__input"),r={avatar:"dist/img/cageholder_4.jpg",type:"sended",chat:o};function c(){}((c.prototype=r).constructor=c).prototype.sendMessage=function(e){this.chat.innerHTML+='<div class="message message--'+this.type+'">\n\t\t<img src="'+this.avatar+'" alt="person" class="message__img">\n\t\t<p class="message__text">'+e+"</p>\n\t\t</div>"};var i=document.querySelectorAll(".contact")[0].querySelector("img").src;function l(){this.avatar=i,this.type="received"}((l.prototype=Object.create(r)).constructor=l).prototype.setAvatar=function(e){this.avatar=e},l.prototype.getPhrase=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&200==s.status&&t(s.responseText)},s.open("GET",e),s.send()};var u=new l,d=new c;e.addEventListener("submit",function(e){e.preventDefault(),t.value&&(d.sendMessage(t.value),u.getPhrase("json/phrases.json",function(e){var t,s,n=JSON.parse(e),a=(t=n,s=Object.keys(t),t[s[Math.floor(Math.random()*s.length+0)]]);setTimeout(function(){u.sendMessage(a),o.scrollTo(0,o.scrollHeight)},500)}),t.value="")});for(var v=0;v<n.length;v++)n[v].addEventListener("click",function(e){if(!this.classList.contains("is-active")){for(var t=0;t<n.length;t++)n[t].classList.remove("is-active");this.classList.add("is-active");var s=this.querySelector("img").src;u.setAvatar(s),o.innerHTML="",a.classList.remove("is-active")}});a.addEventListener("click",function(e){this.classList.toggle("is-active")});var p=document.querySelectorAll(".contact__name");s.addEventListener("input",function(){(function(e){for(var t=this.value.toLowerCase(),s=0;s<e.length;s++)e[s].textContent.toLowerCase().includes(t)&&t||!t?e[s].parentElement.style.display="flex":e[s].parentElement.style.display="none"}).call(this,p)})};